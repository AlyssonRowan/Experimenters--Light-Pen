;------------------------
;  FILL SCREEN (ALPHA MODE ONLY)
;     THIS ROUTINE WILL TURN ON EVERY PIXEL OF THE 
;     PAGE PASSED
;
;   FOR USE BY BASIC PROGRAMS ONLY.  ONE CALLING ARGUMENT.
;          CALL FILL(PAGE)	NOTE:VARIABLE MUST BE AN INTEGER
;-------------------------
CDSEG	SEGMENT
	ASSUME	CS:CDSEG
FLSCRA	PROC	FAR
	PUSH	BP
	MOV	BP,SP
;
	PUSH	ES
	PUSH	SI
	PUSH	DI
;  GET CURRENT NO. OF COLUMNS ON SCREEN
	MOV	AX,0		;  SEGMENT ADDR FOR DATA
	MOV	ES,AX
	MOV	BX,44AH		;  OFFSET FOR VARIABLE 'CRT_COLS'
	MOV	DX,ES:[BX]	;  GET CURRENT VALUE
	MOV	AX,0B800H	;  BASE ADDR OF DISPLAY BUFFER
	MOV	ES,AX
	MOV	AX,2048		;  OFFSET INCR VALUE FOR 40 CLMNS
	MOV	CX,1000		;  NO. OF WORDS TO STORE
;
	CMP	DL,40		;  DOES CURRENT COLUMN NO. =40?
	JZ	F1		;  YES, SO CONTINUE 
	MOV	AX,4096		;  OFFSET INCR VALUE FOR 40 CLMNS
	MOV	CX,2000		;  NO. OF WORDS TO STORE
F1:
	MOV	SI,[BP] + 6	;  GET ADDR OF PARAM
	MOV	BX,[SI]		;  MOVE PAGE PASSED TO BX
	MUL	BX		;  AX NOW CONTAINS OFFSET VALUE
	MOV	DI,AX
	MOV	AX,78FFH	;  FILL VALUE = 0111100011111111B
	REP	STOSW		;  STORE FILL VALUE UNTIL CX=0
;
	POP	DI
	POP	SI
	POP	ES
	POP	BP
	RET	2
FLSCRA	ENDP
CDSEG	ENDS
	END
